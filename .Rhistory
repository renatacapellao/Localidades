dataset[,11]
teste<-c(dataset[,12],dataset[,13])
print(paste0(sp_name[i]))
species <- sp_name[i]
sp_data<- subset(dataset, dataset[,2]== species)
coord<- data.frame(sp_data[,2],sp_data[,11],sp_data[,12])
teste<-c(datset[,2],dataset[,12],dataset[,13])
teste<-data.frame(dataset[,2],dataset[,12],dataset[,13])
dataset[,12]
dataset[,13]
dataset[,14]
familia<-read_excel("GitHub/Localidades/peixes.xlsx")
dataset<-data.frame(familia)
sp_name<- dataset[,2]
sp_name<- levels(as.factor(sp_name))
dataset[,14]
teste<-data.frame(dataset[,2],dataset[,13],dataset[,14])
View(teste)
teste<-data.frame(as.character(dataset[,2]),as.character(dataset[,13]),as.character(dataset[,14]))
sp<-vector(dataset[,2])
sp<-dataset[,2]
familia<-read_excel("GitHub/Localidades/peixes.xlsx")
dataset<-data.frame(familia)
sp_name<- dataset[,2]
sp_name<- levels(as.factor(sp_name))
familia<-read_excel("GitHub/Localidades/peixes.xlsx")
dataset<-data.frame(familia)
sp_name<- dataset[,2]
sp_name<- levels(as.factor(sp_name))
sp_name<- dataset[,2]
sp_name<- as.factor(sp_name)
especies<-levels(sp_name)
Lat<- dataset[,13]
Long<- dataset[,14]
dataset[, c(2, 13, 14)]
familia<-read_excel("GitHub/Localidades/peixes.xlsx")
dataset<-data.frame(familia)
coord<- dataset[, c(2, 13, 14)]
sp_name<- dataset[,2]
sp_name1<- as.factor(sp_name)
especies<-levels(sp_name1)
duplicados.index <-  unique(coord)
View(coord)
library(readr)
HERB1_Renata_ <- read_delim("GitHub/Localidades/HERB1 (Renata).csv",
";", escape_double = FALSE, trim_ws = TRUE)
View(HERB1_Renata_)
HERB <- read_delim("GitHub/Localidades/HERB1 (Renata).csv", ";", escape_double = FALSE, trim_ws = TRUE)
View(HERB)
# familia<-read_excel("GitHub/Localidades/peixes.xlsx")
dataset<-data.frame(HERB)
names(dataset)
# input$btnsearch_spdata
#
# if (is.null(occur.data.coord)) {
#   n <- 0
# }
#
# n <- nrow(occur.data.coord)
#
# if (n > 0) {
#   if (exists("occur.data.coord")) {
library(stringr)
i=1
Long <- paste0(dataset[i,25],dataset[i,26], dataset[i,27])
familia<-read_excel("GitHub/Localidades/peixes.xlsx")
View(familia)
Long <- paste0(dataset[i,25],"°",dataset[i,26],"'", dataset, " ", dataset[i,27])
Long <- paste0(dataset[i,25],"°",dataset[i,26],"'", dataset[i,27], " ", dataset[i,28])
Long <- paste0(dataset[i,25],"°",dataset[i,26],"'", dataset[i,27], "\" ", dataset[i,28])
Long <- paste0(dataset[i,25],"°",dataset[i,26],"'", dataset[i,27], '"', dataset[i,28])
Lat <- paste0(dataset[i,21],"°",dataset[i,22],"'", dataset[i,23], '"', dataset[i,24])
# input$btnsearch_spdata
#
# if (is.null(occur.data.coord)) {
#   n <- 0
# }
#
# n <- nrow(occur.data.coord)
#
# if (n > 0) {
#   if (exists("occur.data.coord")) {
library(stringr)
HERB <- read_delim("GitHub/Localidades/HERB1 (Renata).csv", ";", escape_double = FALSE, trim_ws = TRUE)
dataset<-data.frame(HERB)
View(HERB)
coord<- dataset[, c(2, 13, 14)]
sp_name<- dataset[,2]
sp_name1<- as.factor(sp_name)
especies<-levels(sp_name1)
for(l in c(1:nrow(dataset))){
Long <- paste0(dataset[i,25],"°",dataset[i,26],"'", dataset[i,27], '"', dataset[i,28])
Lat <- paste0(dataset[i,21],"°",dataset[i,22],"'", dataset[i,23], '"', dataset[i,24])
coord[l,2]<- Long
coord[l,3]<- Lat
}
View(coord)
dataset[,6]
dataset[,7]
especie<- paste0(dataset[i,7],dataset[i,8])
especie<- paste(dataset[i,7],dataset[i,8], sep=" ")
HERB <- read_delim("GitHub/Localidades/HERB1 (Renata).csv", ";", escape_double = FALSE, trim_ws = TRUE)
dataset<-data.frame(HERB)
coord<- dataset[, c(2, 13, 14)]
for(l in c(1:nrow(dataset))){
Especie<- paste(dataset[i,7],dataset[i,8], sep=" ")
Long <- paste0(dataset[i,25],"°",dataset[i,26],"'", dataset[i,27], '"', dataset[i,28])
Lat <- paste0(dataset[i,21],"°",dataset[i,22],"'", dataset[i,23], '"', dataset[i,24])
coord[l,1]<- Especie
coord[l,2]<- Long
coord[l,3]<- Lat
}
sp_name<- coord[,1]
sp_name<- as.factor(sp_name)
especies<-levels(sp_name)
duplicados.index <-  unique(coord)
HERB <- read_delim("GitHub/Localidades/HERB1 (Renata).csv", ";", escape_double = FALSE, trim_ws = TRUE)
dataset<-data.frame(HERB)
coord<- dataset[, c(1, 2, 3)]
for(l in c(1:nrow(dataset))){
Especie<- paste(dataset[l,7], dataset[l,8], sep=" ")
print(paste0(Especie[l]))
Long <- paste0(dataset[l,25],"°",dataset[l,26],"'", dataset[l,27], '"', dataset[l,28])
Lat <- paste0(dataset[l,21],"°",dataset[l,22],"'", dataset[l,23], '"', dataset[l,24])
coord[l,1]<- Especie
coord[l,2]<- Long
coord[l,3]<- Lat
}
l=1
paste(dataset[l,7], dataset[l,8], sep=" ")
HERB <- read_delim("GitHub/Localidades/HERB1 (Renata).csv", ";", escape_double = FALSE, trim_ws = TRUE)
dataset<-data.frame(HERB)
coord<- dataset[, c(1, 2, 3)]
for(l in c(1:nrow(dataset))){
Especie<- paste(dataset[l,7], dataset[l,8], sep=" ")
print(paste0(Especie))
Long <- paste0(dataset[l,25],"°",dataset[l,26],"'", dataset[l,27], '"', dataset[l,28])
Lat <- paste0(dataset[l,21],"°",dataset[l,22],"'", dataset[l,23], '"', dataset[l,24])
coord[l,1]<- Especie
coord[l,2]<- Long
coord[l,3]<- Lat
}
names(coord)<-c("Especie", "Long", "Lat")
sp_name<- coord[,1]
sp_name<- as.factor(sp_name)
especies<-levels(sp_name)
sp_name<- coord[,1]
sp_name<- c(coord[,1] )
sp_name<- vector(coord[,1])
coord<-as.data.frame(coord)
sp_name<-coord[,1]
coord[,1]
sp_name
as.factor(coord[,1])
HERB <- read_delim("GitHub/Localidades/HERB1 (Renata).csv", ";", escape_double = FALSE, trim_ws = TRUE)
dataset<-data.frame(HERB)
coord<- dataset[, c(1, 2, 3)]
for(l in c(1:nrow(dataset))){
Especie<- paste(dataset[l,7], dataset[l,8], sep=" ")
print(paste0(Especie))
Long <- paste0(dataset[l,25],"°",dataset[l,26],"'", dataset[l,27], '"', dataset[l,28])
Lat <- paste0(dataset[l,21],"°",dataset[l,22],"'", dataset[l,23], '"', dataset[l,24])
coord[l,1]<- as.character(Especie)
coord[l,2]<- Long
coord[l,3]<- Lat
}
sp_name<-coord[,1]
sp_name<-list(coord[,1])
View(sp_name)
setwd("C:/Users/renata.capellao/Downloads")
library(readxl)
checklist_ipt_template_v1_example_data <- read_excel("checklist_ipt_template_v1_example_data.xlsx")
View(checklist_ipt_template_v1_example_data)
names(checklist_ipt_template_v1_example_data)
occurrence <- read.delim("C:/Users/renata.capellao/Downloads/occurrence.txt", encoding="UTF-8")
View(occurrence)
install.packages("antiword")
install.packages("available")
devtools::install_github("ropenscilabs/cmipr")
install.packages("devtools")
devtools::install_github("ropenscilabs/cmipr")
install.packages("spellcheckr")
devtools::install_github("ropenscilabs/splister")
install.packages("scrubr")
library("scrubr")
library(readxl)
mamiferos <- read_excel("~/GitHub/Localidades/mamiferos.xlsx")
View(mamiferos)
dframe(mamiferos)
mamimeros_df<-dframe(mamimeros_df)
mamimeros_df<-dframe(mamimeros)
mamiferos_df<-dframe(mamiferos)
dframe(mamiferos) %>% coord_impossible()
load("~/GitHub/Localidades/.RData")
library(readr)
Occurence_data <- read_csv("~/Occurence_data.csv")
View(Occurence_data)
library(readr)
Occurence_data <- read_csv("~/Occurence_data.csv")
View(Occurence_data)
library("rgbif")
library(readxl)
library(readr)
# fauna_2005 <- read_excel("2017.05.22 - Especies da fauna ameacadas.xlsx",
#   col_types = c(
#     "numeric", "numeric", "text",
#     "text", "text", "text", "text"
#   ),
#   skip = 1
# )
#
# flora_2005 <- read_excel("2017.05.22 - Especies da flora ameacadas.xlsx",
#   col_types = c(
#     "numeric", "text", "text",
#     "text", "text", "text", "text", "text",
#     "text"
#   )
# )
mamiferos_especies_gibfkey <- read_csv("GitHub/Localidades/mamiferos_especies_gibfkey.csv")
aves_especies_gibfkey <- read_csv("GitHub/Localidades/aves_especies_gibfkey.csv")
peixes_especies_gibfkey <- read_csv("GitHub/Localidades/peixes_especies_gibfkey.csv")
repteis_especies_gibfkey <- read_csv("GitHub/Localidades/repteis_especies_gibfkey.csv")
anfibios_especies_gibfkey <- read_csv("GitHub/Localidades/anfibios_especies_gibfkey.csv")
getwd()
setwd("~/GitHub/Localidades")
library("rgbif")
library(readxl)
library(readr)
# fauna_2005 <- read_excel("2017.05.22 - Especies da fauna ameacadas.xlsx",
#   col_types = c(
#     "numeric", "numeric", "text",
#     "text", "text", "text", "text"
#   ),
#   skip = 1
# )
#
# flora_2005 <- read_excel("2017.05.22 - Especies da flora ameacadas.xlsx",
#   col_types = c(
#     "numeric", "text", "text",
#     "text", "text", "text", "text", "text",
#     "text"
#   )
# )
mamiferos_especies_gibfkey <- read_csv("GitHub/Localidades/mamiferos_especies_gibfkey.csv")
aves_especies_gibfkey <- read_csv("GitHub/Localidades/aves_especies_gibfkey.csv")
peixes_especies_gibfkey <- read_csv("GitHub/Localidades/peixes_especies_gibfkey.csv")
repteis_especies_gibfkey <- read_csv("GitHub/Localidades/repteis_especies_gibfkey.csv")
anfibios_especies_gibfkey <- read_csv("GitHub/Localidades/anfibios_especies_gibfkey.csv")
mamiferos_especies_gibfkey <- read_csv("~/GitHub/Localidades/mamiferos_especies_gibfkey.csv")
aves_especies_gibfkey <- read_csv("~/GitHub/Localidades/aves_especies_gibfkey.csv")
peixes_especies_gibfkey <- read_csv("~/GitHub/Localidades/peixes_especies_gibfkey.csv")
repteis_especies_gibfkey <- read_csv("~/GitHub/Localidades/repteis_especies_gibfkey.csv")
anfibios_especies_gibfkey <- read_csv("~/GitHub/Localidades/anfibios_especies_gibfkey.csv")
library(raster)
BRA.map <- getData("GADM", country="BRA", level=1)
ES.map<- BRA.map[BRA.map$NAME_1 == "Espirito Santo",]
ES_ext<-extent(ES.map)
rm(BRA.map)
rm(ES.map)
grupos<-c("mamiferos_especies_gibfkey", "aves_especies_gibfkey","anfibios_especies_gibfkey","repteis_especies_gibfkey", "peixes_especies_gibfkey")
selecionar <- function(type) {
switch(type,
"mamiferos_especies_gibfkey" = mamiferos_especies_gibfkey,
"aves_especies_gibfkey" = aves_especies_gibfkey,
"anfibios_especies_gibfkey" = anfibios_especies_gibfkey,
"repteis_especies_gibfkey" = repteis_especies_gibfkey,
"peixes_especies_gibfkey" = peixes_especies_gibfkey)
}
styler:::style_selection()
library("rgbif")
library(readxl)
library(readr)
library(raster)
# fauna_2005 <- read_excel("2017.05.22 - Especies da fauna ameacadas.xlsx",
#   col_types = c(
#     "numeric", "numeric", "text",
#     "text", "text", "text", "text"
#   ),
#   skip = 1
# )
#
# flora_2005 <- read_excel("2017.05.22 - Especies da flora ameacadas.xlsx",
#   col_types = c(
#     "numeric", "text", "text",
#     "text", "text", "text", "text", "text",
#     "text"
#   )
# )
mamiferos_especies_gibfkey <- read_csv("~/GitHub/Localidades/mamiferos_especies_gibfkey.csv")
aves_especies_gibfkey <- read_csv("~/GitHub/Localidades/aves_especies_gibfkey.csv")
peixes_especies_gibfkey <- read_csv("~/GitHub/Localidades/peixes_especies_gibfkey.csv")
repteis_especies_gibfkey <- read_csv("~/GitHub/Localidades/repteis_especies_gibfkey.csv")
anfibios_especies_gibfkey <- read_csv("~/GitHub/Localidades/anfibios_especies_gibfkey.csv")
BRA.map <- getData("GADM", country = "BRA", level = 1)
ES.map <- BRA.map[BRA.map$NAME_1 == "Espirito Santo", ]
ES_ext <- extent(ES.map)
rm(BRA.map)
rm(ES.map)
grupos <- c("mamiferos_especies_gibfkey", "aves_especies_gibfkey", "anfibios_especies_gibfkey", "repteis_especies_gibfkey", "peixes_especies_gibfkey")
selecionar <- function(type) {
switch(type,
"mamiferos_especies_gibfkey" = mamiferos_especies_gibfkey,
"aves_especies_gibfkey" = aves_especies_gibfkey,
"anfibios_especies_gibfkey" = anfibios_especies_gibfkey,
"repteis_especies_gibfkey" = repteis_especies_gibfkey,
"peixes_especies_gibfkey" = peixes_especies_gibfkey
)
}
for (g in c(1:length(grupos))) {
print(paste0("#####################   DATASET: ", grupos[g], "   #####################"))
dataset <- selecionar(grupos[g])
dataset <- subset(dataset, (key != 0))
registros_gbif_es <- array(dim = c(nrow(dataset), 1000, 2))
for (i in c(1:nrow(dataset))) {
print(paste0(i, " de ", nrow(dataset), ": espécie = ", registros_gbif_es[[1]][[1]][[i]]))
gbif_data <- occ_search(taxonKey = registros_gbif_es[[2]][[1]][[i]], return = "data")
gbif_data <- as.data.frame(gbif_data)
# row.names(gbif_data)<- gbif_data$key
gbif_data_sub <- subset(gbif_data, !is.na(decimalLongitude) & !is.na(decimalLatitude))
gbif_data_sub <- subset(gbif_data_sub, (decimalLongitude != 0) & (decimalLatitude != 0))
coord <- gbif_data_sub[, c(4, 3)]
colnames(coord) <- c("Longitude", "Latitude")
coord_ES <- subset(coord, (Longitude >= ES_ext[1]) & (Longitude <= ES_ext[2]))
registros_ES <- subset(coord_ES, (Latitude >= ES_ext[3]) & (Latitude <= ES_ext[4]))
registros_gbif_es[[3]][[i]] <- list()
if (!is.null(registros_ES)) {
registros_gbif_es[[3]][[i]] <- list(registros_ES)
print(paste0(nrow(registros_ES), " de ", nrow(coord), " registros encontrados"))
}
write.csv(registros_gbif_es, file = paste0(grupos[g], "_registrosgbif.csv"), col.names = TRUE, row.names = FALSE)
if (g == 1) {
registrosgbif_es_mamiferos <- registros_gbif_es
}
if (g == 2) {
registrosgbif_es_aves <- registros_gbif_es
}
if (g == 3) {
registrosgbif_es_anfibios <- registros_gbif_es
write.csv(registrosgbif_es_mamiferos, file = paste0(grupos[g], "_gibfkey.csv"), col.names = TRUE, row.names = FALSE)
}
if (g == 4) {
registrosgbif_es_repteis <- registros_gbif_es
write.csv(registrosgbif_es_mamiferos, file = paste0(grupos[g], "_gibfkey.csv"), col.names = TRUE, row.names = FALSE)
}
if (g == 5) {
registrosgbif_es_peixes <- registros_gbif_es
}
rm(registros_gbif_es)
}
View(mamiferos_especies_gibfkey)
dataset <- selecionar(grupos[g])
selecionar <- function(type) {
switch(type,
"mamiferos_especies_gibfkey" = mamiferos_especies_gibfkey,
"aves_especies_gibfkey" = aves_especies_gibfkey,
"anfibios_especies_gibfkey" = anfibios_especies_gibfkey,
"repteis_especies_gibfkey" = repteis_especies_gibfkey,
"peixes_especies_gibfkey" = peixes_especies_gibfkey
)
}
dataset <- selecionar(grupos[g])
dataset <- subset(dataset, (key != 0))
registros_gbif_es <- array(dim = c(nrow(dataset), 1000, 2))
gbif_data <- occ_search(taxonKey = registros_gbif_es[[2]][[1]][[i]], return = "data")
print(paste0(i, " de ", nrow(dataset), ": espécie = ", registros_gbif_es[i,,]))
print(paste0(i, " de ", nrow(dataset), ": espécie = ", registros_gbif_es[i,1,1]))
registros_gbif_es <- array(dim = c(nrow(dataset),nrow(dataset), 1000, 2))
# print(paste0(i, " de ", nrow(dataset), ": espécie = ", registros_gbif_es[[1]][[1]][[i]]))
print(paste0(i, " de ", nrow(dataset), ": espécie = ", dataset[i,1]))
gbif_data <- occ_search(taxonKey = dataset[i,2], return = "data")
gbif_data <-dframe(gbif_data)
# gbif_data <- as.data.frame(gbif_data)
# row.names(gbif_data)<- gbif_data$key
gbif_data_sub <- subset(gbif_data, !is.na(decimalLongitude) & !is.na(decimalLatitude))
coord <- gbif_data_sub[, c(4, 3)]
colnames(coord)
colnames(coord) <- c("Longitude", "Latitude")
coord_ES <- subset(coord, (Longitude >= ES_ext[1]) & (Longitude <= ES_ext[2]))
registros_ES <- subset(coord_ES, (Latitude >= ES_ext[3]) & (Latitude <= ES_ext[4]))
registros_gbif_es[[3]][[i]] <- list()
registros_gbif_es <- array(dim = c(nrow(dataset), 1000, 1000,1000))
registros_gbif_es <- array(dim = c(nrow(dataset), 1000, 2))
View(registros_ES)
for (g in c(1:length(grupos))) {
print(paste0("#####################   DATASET: ", grupos[g], "   #####################"))
dataset <- selecionar(grupos[g])
dataset <- subset(dataset, (key != 0))
registros_gbif_es <- array(dim = c(nrow(dataset), 1000, 4))
# sp key, lat, long
for (i in c(1:nrow(dataset))) {
print(paste0(i, " de ", nrow(dataset), ": espécie = ", dataset[i,1]))
registros_gbif_es[i,k,1] <- dataset[i,1]
registros_gbif_es[i,k,2] <- dataset[i,2]
gbif_data <- occ_search(taxonKey = dataset[i,2], return = "data")
gbif_data <- dframe(gbif_data)
gbif_data_sub <- subset(gbif_data, !is.na(decimalLongitude) & !is.na(decimalLatitude))
gbif_data_sub <- subset(gbif_data_sub, (decimalLongitude != 0) & (decimalLatitude != 0))
coord <- gbif_data_sub[, c(4, 3)]
colnames(coord) <- c("Longitude", "Latitude")
coord_ES <- subset(coord, (Longitude >= ES_ext[1]) & (Longitude <= ES_ext[2]))
registros_ES <- subset(coord_ES, (Latitude >= ES_ext[3]) & (Latitude <= ES_ext[4]))
if (!is.null(registros_ES)) {
print(paste0(nrow(registros_ES), " de ", nrow(coord), " registros encontrados"))
for(k in 1:nrow(registros_ES)){
registros_gbif_es[i,k,3] <- registros_ES[k,1]
registros_gbif_es[i,k,4] <- registros_ES[k,2]
}
write.csv(registros_gbif_es, file = paste0(grupos[g], "_registrosgbif.csv"), col.names = TRUE, row.names = FALSE)
if (g == 1) {
registrosgbif_es_mamiferos <- registros_gbif_es
}
if (g == 2) {
registrosgbif_es_aves <- registros_gbif_es
}
if (g == 3) {
registrosgbif_es_anfibios <- registros_gbif_es
write.csv(registrosgbif_es_mamiferos, file = paste0(grupos[g], "_gibfkey.csv"), col.names = TRUE, row.names = FALSE)
}
if (g == 4) {
registrosgbif_es_repteis <- registros_gbif_es
}
if (g == 5) {
registrosgbif_es_peixes <- registros_gbif_es
}
rm(registros_gbif_es)
}
for (g in c(1:length(grupos))) {
print(paste0("#####################   DATASET: ", grupos[g], "   #####################"))
dataset <- selecionar(grupos[g])
dataset <- subset(dataset, (key != 0))
registros_gbif_es <- array(dim = c(nrow(dataset), 1000, 4))
# sp key, lat, long
for (i in c(1:nrow(dataset))) {
print(paste0(i, " de ", nrow(dataset), ": espécie = ", dataset[i,1]))
registros_gbif_es[i,k,1] <- dataset[i,1]
registros_gbif_es[i,k,2] <- dataset[i,2]
gbif_data <- occ_search(taxonKey = dataset[i,2], return = "data")
gbif_data <- dframe(gbif_data)
gbif_data_sub <- subset(gbif_data, !is.na(decimalLongitude) & !is.na(decimalLatitude))
gbif_data_sub <- subset(gbif_data_sub, (decimalLongitude != 0) & (decimalLatitude != 0))
coord <- gbif_data_sub[, c(4, 3)]
colnames(coord) <- c("Longitude", "Latitude")
coord_ES <- subset(coord, (Longitude >= ES_ext[1]) & (Longitude <= ES_ext[2]))
registros_ES <- subset(coord_ES, (Latitude >= ES_ext[3]) & (Latitude <= ES_ext[4]))
if (!is.null(registros_ES)) {
print(paste0(nrow(registros_ES), " de ", nrow(coord), " registros encontrados"))
for(k in c(1:nrow(registros_ES))){
registros_gbif_es[i,k,3] <- registros_ES[k,1]
registros_gbif_es[i,k,4] <- registros_ES[k,2]
}
write.csv(registros_gbif_es, file = paste0(grupos[g], "_registrosgbif.csv"), col.names = TRUE, row.names = FALSE)
if (g == 1) {
registrosgbif_es_mamiferos <- registros_gbif_es
}
if (g == 2) {
registrosgbif_es_aves <- registros_gbif_es
}
if (g == 3) {
registrosgbif_es_anfibios <- registros_gbif_es
write.csv(registrosgbif_es_mamiferos, file = paste0(grupos[g], "_gibfkey.csv"), col.names = TRUE, row.names = FALSE)
}
if (g == 4) {
registrosgbif_es_repteis <- registros_gbif_es
}
if (g == 5) {
registrosgbif_es_peixes <- registros_gbif_es
}
rm(registros_gbif_es)
}
for (g in c(1:length(grupos))) {
print(paste0("#####################   DATASET: ", grupos[g], "   #####################"))
dataset <- selecionar(grupos[g])
dataset <- subset(dataset, (key != 0))
registros_gbif_es <- array(dim = c(nrow(dataset), 1000, 4))
# sp key, lat, long
for (i in c(1:nrow(dataset))) {
print(paste0(i, " de ", nrow(dataset), ": espécie = ", dataset[i,1]))
registros_gbif_es[i,k,1] <- dataset[i,1]
registros_gbif_es[i,k,2] <- dataset[i,2]
gbif_data <- occ_search(taxonKey = dataset[i,2], return = "data")
gbif_data <- dframe(gbif_data)
gbif_data_sub <- subset(gbif_data, !is.na(decimalLongitude) & !is.na(decimalLatitude))
gbif_data_sub <- subset(gbif_data_sub, (decimalLongitude != 0) & (decimalLatitude != 0))
coord <- gbif_data_sub[, c(4, 3)]
colnames(coord) <- c("Longitude", "Latitude")
coord_ES <- subset(coord, (Longitude >= ES_ext[1]) & (Longitude <= ES_ext[2]))
registros_ES <- subset(coord_ES, (Latitude >= ES_ext[3]) & (Latitude <= ES_ext[4]))
if (!is.null(registros_ES)) {
print(paste0(nrow(registros_ES), " de ", nrow(coord), " registros encontrados"))
for (k in c(1:nrow(registros_ES))){
registros_gbif_es[i,k,3] <- registros_ES[k,1]
registros_gbif_es[i,k,4] <- registros_ES[k,2]
}
write.csv(registros_gbif_es, file = paste0(grupos[g], "_registrosgbif.csv"), col.names = TRUE, row.names = FALSE)
if (g == 1) {
registrosgbif_es_mamiferos <- registros_gbif_es
}
if (g == 2) {
registrosgbif_es_aves <- registros_gbif_es
}
if (g == 3) {
registrosgbif_es_anfibios <- registros_gbif_es
write.csv(registrosgbif_es_mamiferos, file = paste0(grupos[g], "_gibfkey.csv"), col.names = TRUE, row.names = FALSE)
}
if (g == 4) {
registrosgbif_es_repteis <- registros_gbif_es
}
if (g == 5) {
registrosgbif_es_peixes <- registros_gbif_es
}
rm(registros_gbif_es)
}
